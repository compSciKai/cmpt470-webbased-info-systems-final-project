<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Test Document</title>
        <script text="type/javascript">
            
            // Sends a request to the server to get an update for a location locationName.
            function getUpdate(locationName) {
                x = new XMLHttpRequest();
                x.addEventListener('load', function(e) {
                    var j = JSON.parse(x.response); // Get a JS object. Access fields with dot or []
                    var s = JSON.stringify(x.response); // Get a string representation.
                    console.log(s);
                    display(j.text);
                });
                x.open("POST", "http://localhost:1234/api/dashboard"); // Prepare a POST request to this URL
                x.setRequestHeader("Content-Type", "application/JSON"); // Since we want to send JSON data, set the content-type correctly so Express can parse it correctly.
                x.send(JSON.stringify({"location": "Vancouver"})); // Send a string made from a JS object.
            }

            // Renders a message on the page
            function display(message) {
                document.getElementById('data').innerHTML = `<p>${message}</p>`;
            }

            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('buttonGetUpdate').addEventListener('click', () => {
                    getUpdate("Vancouver");
                });
            });

        </script>
    </head>
    <body>
        <h1>Merely an HTML for testing things - dashboard edition!</h1>
        <button id="buttonGetUpdate">Get Update for Vancouver</button>
        <div id="data"></div>
    </body>
</html>